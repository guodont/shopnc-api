<script type="text/javascript" src="http://localhost/data/resource/js/jquery.nc_slider.js" charset="utf-8"></script>
<script type="text/javascript">
//图片延迟加载
(function($) {
    $.fn.nc_lazyload_init = function() {
        this.each(function() {
            $(this).after($(this).val().replace(/src=/gi, 'data-src='));
        }).remove();
    };
})(jQuery);

//图片延迟加载
(function($) {
    $.fn.nc_lazyload = function() {
        var lazy_items = [];
        this.each(function() {
            if($(this).attr("data-src") !== undefined){
                var lazy_item = {
                    object: $(this),
                    url: $(this).attr("data-src")
                };
                lazy_items.push(lazy_item);
            }
        });

        var load_img = function() {
            var window_height = $(window).height();
            var scroll_top = $(window).scrollTop();

            $.each(lazy_items, function(i, lazy_item) {
                if(lazy_item.object) {
                    item_top = lazy_item.object.offset().top - scroll_top;
                    if(item_top >= 0 && item_top < window_height) {
                        if(lazy_item.url) {
                            lazy_item.object.attr("src",lazy_item.url);
                        }
                        lazy_item.object = null;
                    }
                }
            });
        };
        load_img();
        $(window).bind("scroll", load_img);
    };
})(jQuery);
</script>
<div id="store_decoration_area" class="store-decoration-page">
<textarea class="lazyload_container" rows="10" cols="30" style="display:none;">
            <div id="block_2" data-block-id="2" nctype="store_decoration_block" class="ncsc-decration-block store-decoration-block-1 store-decoration-block-full-width tip" title="">
    <div nctype="store_decoration_block_content" class="ncsc-decration-block-content store-decoration-block-1-content">
        <div nctype="store_decoration_block_module" class="store-decoration-block-1-module">
                        <ul nctype="store_decoration_slide" style="height:300px; overflow:hidden;">
                <li data-image-name="1_04702381940696816.jpg" data-image-url="http://localhost/data/upload/shop/store/decoration/1/1_04702381940696816.jpg" data-image-link="" style="height:300px; background: url(http://localhost/data/upload/shop/store/decoration/1/1_04702381940696816.jpg) no-repeat scroll center top transparent;">
    <a href="" target="_blank" style="display:block;width:100%;height:100%;"></a>
    </li>
        </ul>
                    </div>
            </div>
    </div>
        </textarea>
</div>
<script type="text/javascript">
    $(document).ready(function(){
        //图片延迟加载
        $(".lazyload_container").nc_lazyload_init();
        $("img").nc_lazyload();

        //幻灯片
        $('[nctype="store_decoration_slide"]').nc_slider();
    });
</script>
